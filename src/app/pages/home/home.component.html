<!-- Minutes Summary Card -->
<div class="container mx-auto px-4 py-6">
  <div class="my-6">
    <h2
      *ngIf="userName"
      class="text-2xl font-bold text-black arabic-text text-right"
    >
      مرحباً، {{ userName }}
    </h2>
  </div>

  <!-- Timing Plan -->
  <div *ngIf="timingPlan" class="text-right mb-6">
    <h3 class="text-xl font-semibold arabic-text">
      خطة الدوام: {{ timingPlan.DescA }}
    </h3>
    <p class="text-lg text-gray-600 arabic-text">
      من: {{ timingPlan.FromTime | date : "h:mm a" }} - إلى:
      {{ timingPlan.ToTime | date : "h:mm a" }}
    </p>
  </div>

  <div class="bg-white rounded-lg shadow-lg p-4">
    <div
      class="flex justify-between items-start arabic-text text-lg divide-x-3 divide-gray-100 px-2"
    >
      <!-- Total Minutes -->
      <div
        class="flex flex-col items-center justify-center p-4 w-1/3 text-center"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          class="w-10 h-10 text-primary mb-3"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m19 7l-1.343 1.343m0 0A8 8 0 1 0 6.343 19.657A8 8 0 0 0 17.657 8.343M12 10v4M9 3h6"
          ></path>
        </svg>
        <span class="text-gray-500 text-2xl">الدقائق الكلية</span>
        <span class="font-semibold text-2xl">720</span>
      </div>
      <!-- Used Minutes -->
      <div
        class="flex flex-col items-center justify-center p-4 w-1/3 text-center"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 15 15"
          class="w-10 h-10 text-primary mb-3"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="square"
            d="M10.5 3.498a3 3 0 0 1-3 2.998a2.999 2.999 0 1 1 3-2.998Zm2 10.992h-10v-1.996a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3z"
            clip-rule="evenodd"
          ></path>
        </svg>
        <span class="text-gray-500 text-2xl">المستخدم</span>
        <span class="font-semibold text-2xl text-primary">{{
          usedMinutes
        }}</span>
      </div>
      <!-- Remaining Minutes -->
      <div
        class="flex flex-col items-center justify-center p-4 w-1/3 text-center"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          class="w-10 h-10 text-primary mb-3"
        >
          <g fill="none" fill-rule="evenodd">
            <path
              d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"
            ></path>
            <path
              fill="currentColor"
              d="M10.975 3.002a1 1 0 0 1-.754 1.196a8 8 0 0 0-.583.156a1 1 0 0 1-.59-1.911q.36-.112.73-.195a1 1 0 0 1 1.197.754m2.05 0a1 1 0 0 1 1.196-.754c4.454 1.01 7.78 4.992 7.78 9.752c0 5.523-4.478 10-10 10c-4.761 0-8.743-3.325-9.753-7.779a1 1 0 0 1 1.95-.442a8 8 0 1 0 9.58-9.58a1 1 0 0 1-.753-1.197M6.614 4.72a1 1 0 0 1-.053 1.414q-.222.205-.427.426A1 1 0 0 1 4.668 5.2q.255-.276.532-.533a1 1 0 0 1 1.414.053M12 6a1 1 0 0 1 1 1v4.586l2.707 2.707a1 1 0 0 1-1.414 1.414l-3-3A1 1 0 0 1 11 12V7a1 1 0 0 1 1-1M3.693 8.388a1 1 0 0 1 .661 1.25a8 8 0 0 0-.156.583a1 1 0 0 1-1.95-.442q.084-.37.195-.73a1 1 0 0 1 1.25-.661"
            ></path>
          </g>
        </svg>
        <span class="text-gray-500 text-2xl">المتبقي</span>
        <span
          class="font-semibold text-2xl"
          [ngClass]="{ 'text-red-500': remainingMinutes < 0 }"
          >{{ remainingMinutes }}</span
        >
      </div>
    </div>
  </div>

  <!-- Table Card -->
  <div class="bg-white rounded-lg shadow-lg overflow-hidden">
    <div class="overflow-x-auto max-h-96">
      <table class="w-full arabic-text table-fixed">
        <thead class="bg-primary text-white sticky top-0 z-10">
          <tr>
            <th class="px-6 py-4 text-right">نوع العملية</th>
            <th class="px-6 py-4 text-right">التاريخ</th>
            <th class="px-6 py-4 text-right">من</th>
            <th class="px-6 py-4 text-right">إلى</th>
            <th class="px-6 py-4 text-right">خصم</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          @for (row of data; track $index) {
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4">
              {{ TransactionTypeLabels[row.transactionType] }}
            </td>
            <td class="px-6 py-4">{{ row.date | date : "dd/MM/yyyy" }}</td>
            <td class="px-6 py-4">
              {{ convertTimeStringToDate(row.fromTime) | date : "h:mm a" }}
            </td>
            <td class="px-6 py-4">
              {{ convertTimeStringToDate(row.toTime) | date : "h:mm a" }}
            </td>
            <td class="px-6 py-4">{{ row.minutes }}</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <app-chatbot></app-chatbot>
</div>
